# 갯마을 식당 네트워크 그래프 시각화

## 📖 개요

갯마을 식당의 영수증, 날씨, 테이블, 메뉴 데이터를 **대화형 네트워크 그래프**로 시각화하는 웹 애플리케이션입니다.

### 주요 기능

- ✅ **네트워크 그래프 시각화**: Canvas 기반 인터랙티브 그래프
- ✅ **CRUD 기능**: 노드/엣지 생성, 읽기, 수정, 삭제
- ✅ **데이터 필터링**: 노드 타입별 표시/숨김
- ✅ **데이터 영속성**: JSON 파일로 데이터 저장/불러오기
- ✅ **물리 시뮬레이션**: 자동 레이아웃 배치
- ✅ **반응형 디자인**: 모든 화면 크기 지원

---

## 🚀 시작하기

### 1. 파일 구조

```
gaetmaeul-graph/
├── index.html        # 메인 HTML 파일
├── styles.css        # 스타일시트
├── app.js           # JavaScript 애플리케이션 로직
└── graph-data.json  # 데이터 파일
```

### 2. 실행 방법

**별도의 설치나 서버 설정 없이 바로 실행 가능합니다!**

1. **모든 파일을 같은 폴더에 저장**
2. **index.html을 브라우저에서 열기**
   - 파일 탐색기에서 `index.html` 더블클릭
   - 또는 브라우저로 드래그 앤 드롭

### 3. 브라우저 호환성

- ✅ Chrome/Edge (권장)
- ✅ Firefox
- ✅ Safari
- ⚠️ Internet Explorer (미지원)

---

## 🎨 노드 타입 및 색상

| 타입 | 색상 | 아이콘 | 설명 |
|------|------|--------|------|
| **영수증** | 🟦 보라색 | 🧾 | 개별 거래 기록 |
| **날씨** | 🟩 초록색 | ☀️ | 날씨 정보 |
| **테이블** | 🟧 주황색 | 🪑 | 테이블 번호 |
| **회 메뉴** | 🟪 분홍색 | 🐟 | 회 종류 |
| **식사 메뉴** | 🟣 보라색 | 🍚 | 식사 메뉴 |
| **주류** | 🟦 하늘색 | 🍺 | 음료/주류 |

---

## 🎯 사용 방법

### 기본 조작

#### 1. **그래프 탐색**
- **드래그**: 노드를 클릭하고 드래그하여 이동
- **팬(Pan)**: 빈 공간을 드래그하여 화면 이동
- **줌**: 마우스 휠로 확대/축소
- **클릭**: 노드를 클릭하면 우측 패널에 상세 정보 표시

#### 2. **필터링**
- 왼쪽 사이드바의 체크박스로 노드 타입별 표시/숨김
- 실시간으로 그래프 업데이트

#### 3. **노드 정보 보기/수정**
1. 노드 클릭
2. 우측 "상세 정보" 패널에서 데이터 확인
3. 입력 필드 수정
4. 💾 "저장" 버튼 클릭

---

## ➕ 데이터 추가하기

### 노드 추가

1. **➕ 노드 추가** 버튼 클릭
2. 모달에서 정보 입력:
   - **노드 ID**: 고유 식별자 (예: `receipt-010`)
   - **노드 타입**: 드롭다운에서 선택
   - **라벨**: 표시될 이름
3. **추가** 버튼 클릭

**예시:**
```
ID: menu-drink-010
타입: 주류
라벨: 청하 x2
```

### 엣지 추가

1. **🔗 엣지 추가** 버튼 클릭
2. 모달에서 정보 입력:
   - **소스 노드**: 시작 노드 선택
   - **타겟 노드**: 도착 노드 선택
   - **관계 타입**: 관계의 종류
   - **라벨**: (선택) 관계 설명
3. **추가** 버튼 클릭

**관계 타입:**
- `has-weather`: 날씨 관계
- `uses-table`: 테이블 사용
- `orders-menu`: 메뉴 주문
- `custom`: 기타

---

## 🗑️ 데이터 삭제하기

### 노드 삭제

1. 삭제할 노드 클릭
2. 우측 패널에서 🗑️ **삭제** 버튼 클릭
3. 확인 대화상자에서 확인

**주의:** 노드를 삭제하면 연결된 모든 엣지도 함께 삭제됩니다!

---

## 💾 데이터 저장 및 불러오기

### 데이터 내보내기

1. **📥 데이터 내보내기** 버튼 클릭
2. `graph-data.json` 파일이 다운로드 폴더에 저장됨
3. 이 파일을 백업하거나 다른 사람과 공유 가능

### 데이터 가져오기

1. **📤 데이터 가져오기** 버튼 클릭
2. 파일 선택 대화상자에서 JSON 파일 선택
3. 데이터가 자동으로 로드되고 그래프 갱신

---

## 📊 데이터 구조

### graph-data.json 형식

```json
{
  "nodes": [
    {
      "id": "receipt-001",
      "type": "receipt",
      "label": "RCP-20150722-001",
      "data": {
        "날짜": "2015-07-22",
        "요일": "수",
        "방문순서": 1,
        "총액": 123000
      }
    }
  ],
  "edges": [
    {
      "id": "edge-001",
      "source": "receipt-001",
      "target": "weather-001",
      "type": "has-weather",
      "label": "날씨"
    }
  ]
}
```

### 노드 객체

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| `id` | string | ✅ | 고유 식별자 |
| `type` | string | ✅ | 노드 타입 (6가지 중 1개) |
| `label` | string | ✅ | 표시될 라벨 |
| `data` | object | ❌ | 추가 데이터 (자유 형식) |

### 엣지 객체

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| `id` | string | ✅ | 고유 식별자 |
| `source` | string | ✅ | 소스 노드 ID |
| `target` | string | ✅ | 타겟 노드 ID |
| `type` | string | ✅ | 관계 타입 |
| `label` | string | ❌ | 관계 라벨 |

---

## 🛠️ 고급 기능

### 레이아웃 초기화

- **🔄 레이아웃 초기화** 버튼 클릭
- 모든 노드가 원형으로 재배치
- 줌/팬 설정 초기화

### 물리 시뮬레이션

그래프는 다음 물리 법칙을 적용하여 자동으로 배치됩니다:

1. **중심력**: 노드들이 중앙으로 모임
2. **반발력**: 노드들이 서로 겹치지 않음
3. **인력**: 연결된 노드들이 가까이 위치
4. **감쇠**: 과도한 움직임 방지

### 커스터마이징

`app.js` 파일의 `config` 객체를 수정하여 커스터마이징 가능:

```javascript
this.config = {
  nodeRadius: 25,      // 노드 크기
  fontSize: 12,        // 폰트 크기
  lineWidth: 2,        // 선 두께
  arrowSize: 8,        // 화살표 크기
  colors: {            // 노드 색상
    'receipt': '#667eea',
    // ...
  }
};
```

---

## 📝 예제 시나리오

### 시나리오 1: 새로운 영수증 기록하기

1. **노드 추가**: 영수증 노드 생성
   ```
   ID: receipt-003
   타입: 영수증
   라벨: RCP-20150722-003
   ```

2. **메뉴 추가**: 주문한 메뉴들 추가
   ```
   ID: menu-sashimi-003
   타입: 회 메뉴
   라벨: 특(회) x2
   ```

3. **관계 연결**: 영수증 → 메뉴 엣지 추가
   ```
   소스: receipt-003
   타겟: menu-sashimi-003
   타입: orders-menu
   라벨: 주문
   ```

4. **데이터 저장**: 📥 데이터 내보내기

### 시나리오 2: 기존 데이터 수정하기

1. 수정할 노드 클릭
2. 우측 패널에서 값 수정
   - 예: 총액 123000 → 125000
3. 💾 저장 버튼 클릭
4. 📥 데이터 내보내기로 변경사항 저장

---

## ❓ FAQ

### Q1: 데이터가 자동 저장되나요?
**A:** 아니오. 수동으로 **📥 데이터 내보내기**를 클릭하여 JSON 파일로 저장해야 합니다.

### Q2: 노드를 삭제했는데 복구할 수 있나요?
**A:** 이전에 저장한 JSON 파일이 있다면 **📤 데이터 가져오기**로 복구 가능합니다. 따라서 중요한 변경 전에는 항상 백업을 권장합니다.

### Q3: 그래프가 너무 복잡해 보여요
**A:** 왼쪽 필터를 사용하여 특정 노드 타입만 표시할 수 있습니다. 예를 들어 영수증과 메뉴만 보려면 날씨/테이블 체크박스를 해제하세요.

### Q4: 노드를 특정 위치에 고정할 수 있나요?
**A:** 노드를 드래그하면 해당 위치에 고정됩니다. 물리 시뮬레이션은 드래그 중인 노드에는 적용되지 않습니다.

### Q5: 다른 사람과 데이터를 공유하려면?
**A:** `graph-data.json` 파일을 내보낸 후 다른 사람에게 전달하면 됩니다. 받은 사람은 **데이터 가져오기**로 동일한 그래프를 볼 수 있습니다.

### Q6: 인터넷 연결이 필요한가요?
**A:** 아니오. 모든 기능이 오프라인에서 작동합니다. 단, 최초 파일 다운로드만 필요합니다.

---

## 🎓 팁 & 트릭

### 💡 Tip 1: 효율적인 데이터 입력
같은 타입의 노드를 여러 개 추가할 때는 ID 패턴을 일관되게 유지하세요.
```
receipt-001, receipt-002, receipt-003, ...
menu-drink-001, menu-drink-002, ...
```

### 💡 Tip 2: 백업 습관
중요한 작업 전후로 데이터를 내보내기하여 백업하세요.
```
graph-data-2025-01-24-v1.json
graph-data-2025-01-24-v2.json
```

### 💡 Tip 3: 필터 활용
복잡한 그래프에서 특정 패턴을 찾을 때 필터를 활용하세요.
- 예: 특정 날짜의 영수증만 보기 → 영수증만 체크

### 💡 Tip 4: 줌 활용
- 전체 구조 파악: 줌 아웃 (마우스 휠 아래)
- 상세 정보 확인: 줌 인 (마우스 휠 위)

---

## 🐛 문제 해결

### 문제: 그래프가 표시되지 않아요
**해결:**
1. 브라우저 콘솔(F12) 확인
2. `graph-data.json` 파일이 같은 폴더에 있는지 확인
3. JSON 파일 형식이 올바른지 확인 (온라인 JSON 검증기 사용)

### 문제: 데이터 저장이 안 돼요
**해결:**
1. 브라우저 다운로드 폴더 권한 확인
2. 팝업 차단 해제
3. 다른 브라우저로 시도

### 문제: 노드가 너무 빨리 움직여요
**해결:**
`app.js`의 `simulation` 설정 수정:
```javascript
this.simulation = {
  damping: 0.9  // 기본값 0.8 → 0.9로 증가
};
```

---

## 📞 지원

문제가 발생하거나 기능 제안이 있으시면:
- 데이터 파일 확인
- 브라우저 콘솔 확인
- JSON 형식 검증

---

## 📄 라이선스

이 프로젝트는 교육 및 개인 사용 목적으로 자유롭게 사용 가능합니다.

---

## 🎉 즐거운 데이터 시각화 되세요!

**Made with ❤️ for 갯마을 식당**
